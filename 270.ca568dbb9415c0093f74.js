"use strict";(self.webpackChunkherbie21=self.webpackChunkherbie21||[]).push([[270],{3270:(D,p,l)=>{l.r(p),l.d(p,{ManutencaoModule:()=>k});var u=l(8583),o=l(3679),g=l(8239),f=l(6738),v=l(9976),t=l(7716),c=l(2305),d=l(6364),m=l(8424),h=l(9077);function b(a,i){if(1&a&&t._UZ(0,"app-datatable",7),2&a){const e=t.oxw(2);t.Q6J("columns",e.columns)("data",e.data)}}function Z(a,i){if(1&a&&(t.TgZ(0,"div",5),t.YNc(1,b,1,2,"app-datatable",6),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.data.length>0)}}function M(a,i){1&a&&(t.TgZ(0,"div",9),t.TgZ(1,"h3",10),t._UZ(2,"i",11),t._uU(3," Voc\xea ainda n\xe3o possui registros de manuten\xe7\xe3o."),t.qZA(),t.qZA())}function x(a,i){if(1&a&&t.YNc(0,M,4,0,"div",8),2&a){const e=t.oxw();t.Q6J("ngIf",!e.loading)}}let C=(()=>{class a{constructor(e,n,r,s){this.route=e,this.manutencaoervice=n,this.renderer=r,this.router=s,this.title="",this.loading=!1,this.columns=[],this.data=[],this.iconeLogin=v.ILF,this.title=e.snapshot.data.title}ngOnInit(){var e=this;return(0,g.Z)(function*(){e.loading=!0,e.columns=[{title:"Categoria",data:"category"},{title:"Data",data:"date"},{title:"Pre\xe7o",data:"price"},{title:"Visualizar",data:"_id",render:function(n,r,s){return`\n          <button class="btn btn-primary fa fa-eye fa-2x" item-id="${n}" button-type="view"></button>            `}}],yield e.buscaDados(),setTimeout(()=>{e.loading=!1},500)})()}buscaDados(){var e=this;return(0,g.Z)(function*(){e.data=[],e.manutencaoervice.read_all().subscribe(n=>{n.forEach(r=>{null==r.price&&(r.price=0);let s={category:r.category,date:e.formataData(r.date),price:r.price,_id:r._id};e.data.push(s)})})})()}formataData(e){return f(e).add(1,"d").format("YYYY/MM/DD")}ngAfterViewInit(){this.renderer.listen("document","click",e=>{if(e.target.hasAttribute("item-id"))switch(e.target.getAttribute("button-type")){case"view":this.manutencaoervice.read_id(e.target.getAttribute("item-id")).subscribe(n=>{this.router.navigate(["home/manutencao/visualiza",n._id])})}})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(c.gz),t.Y36(d.K),t.Y36(t.Qsj),t.Y36(c.F0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-visualiza-manutencao"]],decls:8,vars:4,consts:[[1,"titulo"],[1,"linha"],["class","mb-4",4,"ngIf","ngIfElse"],["semDados",""],[3,"loading"],[1,"mb-4"],["class","mt-2",3,"columns","data",4,"ngIf"],[1,"mt-2",3,"columns","data"],["class","text-center semValor m-2",4,"ngIf"],[1,"text-center","semValor","m-2"],[1,"text-white"],["aria-hidden","false",1,"fa","fa-exclamation-circle","fa-1x","mr-1"]],template:function(e,n){if(1&e&&(t.TgZ(0,"header"),t.TgZ(1,"h2",0),t._uU(2),t.qZA(),t._UZ(3,"hr",1),t.qZA(),t.YNc(4,Z,2,1,"div",2),t.YNc(5,x,1,1,"ng-template",null,3,t.W1O),t._UZ(7,"app-loading",4)),2&e){const r=t.MAs(6);t.xp6(2),t.Oqu(n.title),t.xp6(2),t.Q6J("ngIf",n.data.length>0)("ngIfElse",r),t.xp6(3),t.Q6J("loading",n.loading)}},directives:[u.O5,m.N,h.n],styles:[".titulo[_ngcontent-%COMP%]{font-size:1.2rem;color:#eee;text-align:center;margin-top:1rem}"]}),a})();var _=l(521);function T(a,i){1&a&&t._UZ(0,"app-vmessage",21)}function E(a,i){if(1&a&&(t.TgZ(0,"option",22),t._uU(1),t.qZA()),2&a){const e=i.$implicit;t.Q6J("value",e.value),t.xp6(1),t.Oqu(e.name)}}function q(a,i){1&a&&t._UZ(0,"app-vmessage",23)}function A(a,i){1&a&&t._UZ(0,"app-vmessage",24)}function U(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",4),t.TgZ(1,"form",5),t.NdJ("submit",function(){return t.CHM(e),t.oxw().submit()}),t.TgZ(2,"div",6),t.TgZ(3,"label",7),t._uU(4,"Data da realiza\xe7\xe3o da manuten\xe7\xe3o: "),t.qZA(),t._UZ(5,"input",8),t.YNc(6,T,1,0,"app-vmessage",9),t.qZA(),t.TgZ(7,"label",7),t._uU(8,"Categoria do servi\xe7o: "),t.qZA(),t.TgZ(9,"select",10),t.TgZ(10,"option",11),t._uU(11,"Selecione a categoria..."),t.qZA(),t.YNc(12,E,2,2,"option",12),t.qZA(),t.TgZ(13,"div",13),t.TgZ(14,"label",7),t._uU(15,"Resumo do servi\xe7o executado: "),t.qZA(),t._UZ(16,"input",14),t.YNc(17,q,1,0,"app-vmessage",15),t.qZA(),t.TgZ(18,"div",6),t.TgZ(19,"label",7),t._uU(20,"Pre\xe7o: "),t.qZA(),t._UZ(21,"input",16),t.YNc(22,A,1,0,"app-vmessage",17),t.qZA(),t.TgZ(23,"div",6),t.TgZ(24,"label",7),t._uU(25,"Observa\xe7\xf5es: "),t.qZA(),t._UZ(26,"textarea",18),t.qZA(),t.TgZ(27,"div",19),t.TgZ(28,"button",20),t._uU(29,"Cadastrar"),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=t.oxw();let n,r,s;t.xp6(1),t.Q6J("formGroup",e.cadastraManutencaoForm),t.xp6(5),t.Q6J("ngIf",(null==(n=e.cadastraManutencaoForm.get("date"))||null==n.errors?null:n.errors.required)&&e.validaSubmit),t.xp6(6),t.Q6J("ngForOf",e.opcoes),t.xp6(5),t.Q6J("ngIf",(null==(r=e.cadastraManutencaoForm.get("service"))||null==r.errors?null:r.errors.required)&&e.validaSubmit),t.xp6(5),t.Q6J("ngIf",(null==(s=e.cadastraManutencaoForm.get("price"))||null==s.errors?null:s.errors.required)&&e.validaSubmit)}}function y(a,i){if(1&a&&(t.TgZ(0,"h2",4),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Oqu(e.titleView)}}function I(a,i){if(1&a&&(t.TgZ(0,"h2",4),t._uU(1),t.qZA()),2&a){const e=t.oxw();t.xp6(1),t.Oqu(e.titleEdit)}}function F(a,i){1&a&&t._UZ(0,"app-vmessage",28)}function Y(a,i){1&a&&t._UZ(0,"app-vmessage",29)}function P(a,i){1&a&&t._UZ(0,"app-vmessage",30)}function J(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"button",31),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).liberarEdicao()}),t._UZ(1,"i",32),t._uU(2," Editar"),t.qZA()}}function V(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){return t.CHM(e),t.oxw(2).liberarEdicao()}),t._UZ(1,"i",34),t._uU(2," Salvar"),t.qZA()}if(2&a){const e=t.oxw(2);t.Q6J("disabled",!e.save)}}function N(a,i){if(1&a){const e=t.EpF();t.TgZ(0,"div",5),t.TgZ(1,"form",6),t.TgZ(2,"div",7),t.TgZ(3,"label",8),t._uU(4,"Data da realiza\xe7\xe3o da manuten\xe7\xe3o: "),t.qZA(),t._UZ(5,"input",9),t.YNc(6,F,1,0,"app-vmessage",10),t.qZA(),t.TgZ(7,"label",8),t._uU(8,"Categoria do servi\xe7o: "),t.qZA(),t.TgZ(9,"select",11),t._UZ(10,"option"),t.TgZ(11,"option"),t._uU(12,"Mecanico"),t.qZA(),t.TgZ(13,"option"),t._uU(14,"Pintura"),t.qZA(),t.TgZ(15,"option"),t._uU(16,"Limpeza"),t.qZA(),t.qZA(),t.TgZ(17,"div",12),t.TgZ(18,"label",8),t._uU(19,"Resumo do servi\xe7o executado: "),t.qZA(),t._UZ(20,"input",13),t.YNc(21,Y,1,0,"app-vmessage",14),t.qZA(),t.TgZ(22,"div",7),t.TgZ(23,"label",8),t._uU(24,"Pre\xe7o: "),t.qZA(),t._UZ(25,"input",15),t.YNc(26,P,1,0,"app-vmessage",16),t.qZA(),t.TgZ(27,"div",7),t.TgZ(28,"label",8),t._uU(29,"Observa\xe7\xf5es: "),t.qZA(),t._UZ(30,"textarea",17),t.qZA(),t.TgZ(31,"div",18),t.TgZ(32,"div",19),t.TgZ(33,"button",20),t.NdJ("click",function(){return t.CHM(e),t.oxw().voltar()}),t._UZ(34,"i",21),t._uU(35," Voltar"),t.qZA(),t.qZA(),t.TgZ(36,"div",22),t.YNc(37,J,3,0,"button",23),t.YNc(38,V,3,1,"button",24),t.qZA(),t.TgZ(39,"div",25),t.TgZ(40,"button",26),t.NdJ("click",function(){return t.CHM(e),t.oxw().remover()}),t._UZ(41,"i",27),t._uU(42," Excluir"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()}if(2&a){const e=t.oxw();let n,r,s;t.xp6(1),t.Q6J("formGroup",e.editManutencaoForm),t.xp6(5),t.Q6J("ngIf",null==(n=e.editManutencaoForm.get("date"))||null==n.errors?null:n.errors.required),t.xp6(15),t.Q6J("ngIf",null==(r=e.editManutencaoForm.get("service"))||null==r.errors?null:r.errors.required),t.xp6(5),t.Q6J("ngIf",null==(s=e.editManutencaoForm.get("price"))||null==s.errors?null:s.errors.required),t.xp6(11),t.Q6J("ngIf",!e.edit),t.xp6(1),t.Q6J("ngIf",e.edit)}}const O=[{path:"cadastra",component:(()=>{class a{constructor(e,n,r,s){this.fb=e,this.route=n,this.manutencaoService=r,this.router=s,this.title="",this.loading=!1,this.validaSubmit=!1,this.opcoes=[{name:"Motor",value:"motor"},{name:"Rodas",value:"rodas"},{name:"Suspen\xe7\xe3o",value:"suspencao"},{name:"Arrefecimento",value:"arrefecimento"},{name:"Pe\xe7a",value:"peca"}],this.title=n.snapshot.data.title}ngOnInit(){this.loading=!0,this.initForm(),setTimeout(()=>{this.loading=!1},500)}initForm(){this.cadastraManutencaoForm=this.fb.group({price:["",[o.kI.required]],service:["",[o.kI.required]],category:["Selecione a posi\xe7\xe3o...",[o.kI.required]],date:["",[o.kI.required]],observation:[""]})}submit(){var e;this.loading=!0,this.validaSubmit=!0,this.cadastraManutencaoForm.invalid?this.loading=!1:"Selecione a posi\xe7\xe3o..."!=(null===(e=this.cadastraManutencaoForm.get("position"))||void 0===e?void 0:e.value)?this.manutencaoService.create(this.cadastraManutencaoForm.value).subscribe(n=>{this.loading=!1,this.router.navigate(["home/manutencao/registros"])},n=>{alert("Problema ao cadastrar manuten\xe7\xe3o!"),console.log(n),this.loading=!1,this.validaSubmit=!1}):this.loading=!1}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(o.qu),t.Y36(c.gz),t.Y36(d.K),t.Y36(c.F0))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-cadastra-manutencao"]],decls:6,vars:3,consts:[[1,"titulo"],[1,"linha"],["class","pt-3 mb-4 container",4,"ngIf"],[3,"loading"],[1,"pt-3","mb-4","container"],[3,"formGroup","submit"],[1,"form-group"],[1,"label-cad-manu"],["type","date","formControlName","date",1,"form-control","form-control-lg"],["text","Preencha a data.",4,"ngIf"],["formControlName","category",1,"form-select"],["disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],[1,"form-group","mt-3"],["type","text","formControlName","service",1,"form-control","form-control-lg"],["text","Preencha o resumo do servi\xe7o.",4,"ngIf"],["formControlName","price","type","number","step","0.01","placeholder","Digite o pre\xe7o",1,"form-control","form-control-lg"],["text","Preencha o valor do servi\xe7o.",4,"ngIf"],["formControlName","observation","rows","3",1,"form-control"],[1,"col","text-center"],["type","submit",1,"btn","btn-primary"],["text","Preencha a data."],[3,"value"],["text","Preencha o resumo do servi\xe7o."],["text","Preencha o valor do servi\xe7o."]],template:function(e,n){1&e&&(t.TgZ(0,"header"),t.TgZ(1,"h2",0),t._uU(2),t.qZA(),t._UZ(3,"hr",1),t.qZA(),t.YNc(4,U,30,5,"div",2),t._UZ(5,"app-loading",3)),2&e&&(t.xp6(2),t.Oqu(n.title),t.xp6(2),t.Q6J("ngIf",!n.loading),t.xp6(1),t.Q6J("loading",n.loading))},directives:[u.O5,m.N,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,o.EJ,o.YN,o.Kr,u.sg,o.wV,_.g],styles:["label.label-cad-manu[_ngcontent-%COMP%]{color:#fff}.titulo[_ngcontent-%COMP%]{font-size:1.2rem;color:#eee;text-align:center;margin-top:1rem}.linha[_ngcontent-%COMP%]{background-color:#eee;width:10px}select[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:4px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{color:#495057}.btn-primary[_ngcontent-%COMP%]{color:#fff;background-color:#656565;border-color:#656565}[_ngcontent-%COMP%]::placeholder{color:#999;font-size:1rem}input[type=date][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{font-size:1rem}"]}),a})(),data:{title:"Cadastro de manuten\xe7\xe3o"}},{path:"registros",component:C,data:{title:"Registros de Manuten\xe7\xe3o"}},{path:"visualiza/:id",component:(()=>{class a{constructor(e,n,r,s,S){this.route=e,this.ManutencaoService=n,this.router=r,this.fb=s,this.location=S,this.id="",this.titleView="",this.titleEdit="",this.loading=!1,this.edit=!1,this.save=!1,this.opcoes=[{name:"Frente Esquerda",value:"fl"},{name:"Frente Direita",value:"fr"},{name:"Traseira Esquerda",value:"bl"},{name:"Traseira Direita",value:"br"}],this.id=this.route.snapshot.params.id,this.titleView=this.route.snapshot.data.titleView,this.titleEdit=this.route.snapshot.data.titleEdit}ngOnInit(){this.loading=!0,this.buscaDadosmanutencao(),setTimeout(()=>{this.loading=!1},1e3)}buscaDadosmanutencao(){this.ManutencaoService.read_id(this.id).subscribe(e=>{let n=e,r=f(n.date).add(1,"d").format("YYYY-MM-DD");this.editManutencaoForm=this.fb.group({date:[{value:r,disabled:!0},[o.kI.required]],service:[{value:n.service,disabled:!0},[o.kI.required]],category:[{value:n.category,disabled:!0},[o.kI.required]],price:[{value:n.price,disabled:!0},[o.kI.required]],observation:[{value:n.observation,disabled:!0}]})},e=>{console.log(e)})}liberarEdicao(){this.edit?this.editar():(this.loading=!0,this.editManutencaoForm.controls.date.enable(),this.editManutencaoForm.controls.service.enable(),this.editManutencaoForm.controls.category.enable(),this.editManutencaoForm.controls.price.enable(),this.editManutencaoForm.controls.observation.enable(),this.edit=!0,setTimeout(()=>{this.loading=!1},100),setTimeout(()=>{this.save=!0},2e3))}editar(){this.loading=!0,this.ManutencaoService.update(this.id,this.editManutencaoForm.value).subscribe(e=>{this.loading=!1,this.router.navigate(["home/manutencao/registros"])},e=>{alert("Problema ao editar registro!"),console.log(e),this.loading=!1})}voltar(){this.location.back()}remover(){this.loading=!0,this.ManutencaoService.delete(this.id).subscribe(e=>{this.loading=!1,this.router.navigate(["home/manutencao/registros"])},e=>{alert("Problema ao excluir registro!"),console.log(e),this.loading=!1})}}return a.\u0275fac=function(e){return new(e||a)(t.Y36(c.gz),t.Y36(d.K),t.Y36(c.F0),t.Y36(o.qu),t.Y36(u.Ye))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-view-edit-manutencao"]],decls:6,vars:4,consts:[["class","titulo",4,"ngIf"],[1,"linha"],["class","pt-3 mb-4 container",4,"ngIf"],[3,"loading"],[1,"titulo"],[1,"pt-3","mb-4","container"],[3,"formGroup"],[1,"form-group"],[1,"label-cad-manu"],["type","date","formControlName","date",1,"form-control","form-control-lg"],["text","Preencha a data.",4,"ngIf"],["formControlName","category",1,"form-control","form-control-lg"],[1,"form-group","mt-3"],["type","text","formControlName","service",1,"form-control","form-control-lg"],["text","Preencha o resumo do servi\xe7o.",4,"ngIf"],["formControlName","price","type","number","step","0.01","placeholder","Digite o pre\xe7o",1,"form-control","form-control-lg"],["text","Preencha o valor do servi\xe7o.",4,"ngIf"],["formControlName","observation","rows","3",1,"form-control"],[1,"row","p-3"],[1,"col-4","text-right"],[1,"btn","btn-secondary",3,"click"],["aria-hidden","false",1,"fa","fa-arrow-circle-left","fa-2x"],[1,"col-4","text-center"],["class","btn btn-primary",3,"click",4,"ngIf"],["class","btn btn-success",3,"disabled","click",4,"ngIf"],[1,"col-4","text-left"],[1,"btn","btn-danger",3,"click"],["aria-hidden","false",1,"fa","fa-trash","fa-2x"],["text","Preencha a data."],["text","Preencha o resumo do servi\xe7o."],["text","Preencha o valor do servi\xe7o."],[1,"btn","btn-primary",3,"click"],["aria-hidden","false",1,"fa","fa-edit","fa-2x"],[1,"btn","btn-success",3,"disabled","click"],["aria-hidden","false",1,"fa","fa-check-circle","fa-2x"]],template:function(e,n){1&e&&(t.TgZ(0,"header"),t.YNc(1,y,2,1,"h2",0),t.YNc(2,I,2,1,"h2",0),t._UZ(3,"hr",1),t.qZA(),t.YNc(4,N,43,6,"div",2),t._UZ(5,"app-loading",3)),2&e&&(t.xp6(1),t.Q6J("ngIf",!n.edit),t.xp6(1),t.Q6J("ngIf",n.edit),t.xp6(2),t.Q6J("ngIf",!n.loading),t.xp6(1),t.Q6J("loading",n.loading))},directives:[u.O5,m.N,o._Y,o.JL,o.sg,o.Fj,o.JJ,o.u,o.EJ,o.YN,o.Kr,o.wV,_.g],styles:["label.label-cad-manu[_ngcontent-%COMP%]{color:#fff}[_ngcontent-%COMP%]::placeholder{color:#999;font-size:1rem}input[type=date][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{font-size:1rem}.titulo[_ngcontent-%COMP%]{font-size:1.2rem;color:#eee;text-align:center;margin-top:1rem}.linha[_ngcontent-%COMP%]{background-color:#eee;width:10px}select[_ngcontent-%COMP%]{width:100%;padding:10px;border-radius:4px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{color:#495057}"]}),a})(),data:{titleView:"Visualiza Manuten\xe7\xe3o",titleEdit:"Edita Manuten\xe7\xe3o"}}];let z=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[c.Bz.forChild(O)],c.Bz]}),a})();var Q=l(1222);let k=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[[u.ez,o.u5,o.UX,z,Q.m]]}),a})()}}]);